{
  "type": "CityJSONExtension",
  "name": "dynamizer",
  "description": "Extension to model dynamic attributes",
  "uri": "https://github.com/1khawla/CityJSON-Dynamizer/blob/main/dynamizer.ext.json",
  "version":"1.0",
  "versionCityJSON":"1.1",
  "definitions": {
    "SensorConnection": {
      "properties": {
        "SensorId": {
          "type": "string"
        },
        "serviceType": {
          "type": "string"
        },
        "linkToObservation": {
          "description": "link to observation response",
          "uri": "uri-reference"
        },
        "linkToSensor": {
          "description": "link to the description/metadata of the sensor device",
          "uri": "uri-reference"
        },
        "sensorLocation": {
          "$ref": "cityobjects.schema.json#/_AbstractCityObject"
        }
      }
    },
    "AtomicTimeseries": {
      "properties": {
        "time": {
          "type": "string"
        },
        "value": {
          "type": "number"
        }
      }
    },
    "CompositeTimeseries": {
      "properties": {
        "BaseTime": {
          "type": "string",   
        },
        "spacing":{
          "type": "string"
        },
        "timeseriesComponent":{
          "repetitions": {
            "type": "number"
          },
          "AdditionalGap": {
            "type": "string"
        },
        "value":{
          "type": "array"
        }
      }
    },
    "_AbstractTimeseries": {
      "type": "object",
      "properties": {
        "timeseries": {
          "description": "It contains dynamic data to model",
          "type": "number",
          "subclass": {
            "oneOf": [
              {
                "$ref": "#/definitions/AtomicTimeseries"
              },
              {
                "$ref": "#/definitions/CompositeTimeseries"
              }
            ]
          },
          "linkToObservation": {
            "$ref": "#/definitions/SensorConnection"
          }
        }
      }
    }
  },
  "extraRootProperties": {},
  "extraAttributes": {
    "_AbstractCityObject": {
      "+dynamizer": {
        "type": "object",
        "properties": {
          "attributeRef": {
            "description": "It refers to a specific attribute of a specific city object by using an XPath expression. This is the static property that should be overridden by timeseries data",
            "uri": "uri-reference"
          },
          "startTime": {
            "type": "string"
          },
          "endTime": {
            "type": "string"
          },
          "linkToSensor": {
            "$ref": "#/definitions/SensorConnection"
          },
          "dynamicData": {
            "$ref": "#/definitions/_AbstractTimeSeries"
          }
        }
      }
    }
  },
  "extraCityObjects": {}
}
